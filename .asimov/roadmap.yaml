# Forge Roadmap
# For version history, see docs/VERSION_HISTORY.md
# Last research update: 2025-11-28

metadata:
  current_version: "4.2.1"
  last_updated: "2025-12-02"
  philosophy: "Zero tokens. Zero emissions. $40K-$132K/year saved."

# Current Release
current:
  version: "4.2.1"
  status: released
  date: "2025-12-02"
  summary: "Critical Bug Fixes - Field Testing"
  highlights:
    - "COUNT function: Count rows in any column type"
    - "Multi-file validation: forge validate file1.yaml file2.yaml"
    - "Unreserved 'scenarios' keyword - tables named 'scenarios' work"
    - "Multi-document YAML support (leading ---)"
    - "Clear null handling error messages"
  stats:
    tests: 167
    warnings: 0
    throughput: "96K rows/sec"

# ═══════════════════════════════════════════════════════════════════════════════
# NEXT MILESTONES (Prioritized by Research - Nov 2025)
# ═══════════════════════════════════════════════════════════════════════════════

v4_1:
  version: "4.1.0"
  status: released
  date: "2025-11-28"
  summary: "Excel Function Boost - High-Value Additions"
  deliverables:
    - feature: "UNIQUE/COUNTUNIQUE"
      description: "Count unique values in columns (all types)"
      status: done
    - feature: "FormulaErrorContext"
      description: "Rich error structure with suggestions"
      status: done
  stats:
    tests_added: 7
    total_tests: 227

next:
  - version: "4.3.0"
    summary: "Next planned features (TBD)"
    goal: STABILITY

# ═══════════════════════════════════════════════════════════════════════════════
# CRITICAL BUG FIXES (Found 2025-12-01 - Field testing) - RELEASED 2025-12-02
# ═══════════════════════════════════════════════════════════════════════════════

v4_2_1:
  version: "4.2.1"
  status: released
  date: "2025-12-02"
  priority: CRITICAL
  summary: "Bug Fixes - Real-world validation issues"
  rationale: |
    Issues discovered during financial model validation.
    These block practical use of Forge for grant applications.
  deliverables:
    - feature: "COUNT/LEN function"
      description: "Count rows in table columns (e.g., =COUNT(nls.name) for total NLs)"
      status: done
      effort: "2h"
      impact: "Currently must hardcode counts - defeats purpose of calculated models"
    - feature: "Multi-file validation"
      description: "forge validate file1.yaml file2.yaml (batch validation)"
      status: done
      effort: "1h"
      impact: "Currently errors out with 'unexpected argument'"
    - feature: "Unreserve 'scenarios' keyword"
      description: "Table named 'scenarios' triggers cryptic error"
      status: done
      effort: "1h"
      impact: "Common financial modeling term - should not be reserved"
    - feature: "Multi-document YAML support"
      description: "Files with leading '---' should parse correctly"
      status: done
      effort: "1h"
      impact: "Standard YAML practice causes parse failure"
    - feature: "Null handling in arrays"
      description: "Allow null in numeric arrays or provide clear error"
      status: done
      effort: "1h"
      impact: "[1000, null] fails with confusing 'Expected Number' error"
  estimated_hours: 6
  actual_hours: 3
  reported_by: "Internal field testing"

v4_2:
  version: "4.2.0"
  status: released
  date: "2025-12-01"
  priority: CRITICAL
  summary: "Release Automation - Cross-platform CI/CD"
  rationale: "Parity with asimov CI/CD. Enable automated releases."
  deliverables:
    - feature: "release.yml workflow"
      description: "Cross-platform builds on tag push"
      status: done
    - feature: "Multi-target builds"
      description: "Linux x86_64, macOS ARM/Intel, Windows"
      status: done
    - feature: "UPX compression"
      description: "Compress Linux/Windows binaries"
      status: done
    - feature: "GitHub Releases"
      description: "Auto-create release with checksums"
      status: done
    - feature: "crates.io publish"
      description: "Auto-publish on tag"
      status: done

v4_3:
  version: "4.3.0"
  status: planned
  priority: MEDIUM
  summary: "Advanced Excel Functions"
  deliverables:
    - feature: "OFFSET"
      description: "Dynamic range references for flexible models"
      effort: "3h"
    - feature: "LET"
      description: "Named variables within formulas - cleaner complex formulas"
      effort: "3h"
    - feature: "FILTER"
      description: "Dynamic array filtering"
      effort: "2h"
    - feature: "SORT"
      description: "Dynamic array sorting"
      effort: "2h"
  estimated_hours: 8

# ═══════════════════════════════════════════════════════════════════════════════
# MAJOR RELEASES
# ═══════════════════════════════════════════════════════════════════════════════

v5:
  version: "5.0.0"
  status: planned
  target: "2026-Q1"
  summary: "Excel Parity & MCP 2.0"
  rationale: |
    Excel compatibility is the killer feature.
    MCP ecosystem is growing - stay current.
  features:
    excel_functions:
      - "INDIRECT (string-based cell refs)"
      - "LAMBDA (custom functions)"
      - "CHOOSE (scenario modeling)"
      - "SWITCH (cleaner conditionals)"
      - "Full Excel compatibility matrix"
    mcp:
      - "MCP v2 compliance (parallel tools)"
      - "Enhanced tool descriptions"
      - "Streaming responses"
    distribution:
      - "Homebrew formula"
      - "Scoop manifest (Windows)"
      - "Publish Zed extension to zed-industries/extensions"
      - "Publish VSCode extension to marketplace"
      - "Docker image"


# ═══════════════════════════════════════════════════════════════════════════════
# MARKET INTELLIGENCE (Updated Nov 2025)
# ═══════════════════════════════════════════════════════════════════════════════

market:
  last_updated: "2025-11-28"

  microsoft_excel:
    copilot_function:
      launched: "Nov 2025"
      description: "=COPILOT() function in cells - AI generates content"
      limits: "100 calls/10min, 300 calls/hour"
      requires: "OneDrive/SharePoint (cloud-only)"
      weakness: "Still hallucinates - probabilistic, not deterministic"
      source: "https://www.windowscentral.com/microsoft/microsoft-office/microsoft-excel-gets-more-ai-and-this-time-its-actually-useful"
    agent_mode:
      description: "Multi-step tasks in Excel grid"
      models: "Now supports Anthropic + OpenAI"
      source: "Microsoft Ignite Nov 2025"

  google_sheets:
    ai_function:
      description: "=AI() function for categorization, summarization"
      launched: "2025"
    formula_assistance:
      description: "Gemini explains formula errors + self-corrects"
      launched: "Sept 2025"
      source: "https://workspaceupdates.googleblog.com/2025/09/smarter-natural-formula-generation-gemini-sheets.html"
    pricing: "$14/user/month for Business Standard with Gemini"

  mcp_ecosystem:
    anniversary: "Nov 25, 2025 - MCP turned 1 year old"
    new_spec:
      - "PCI-compliant payment processing"
      - "Parallel tool calls"
      - "Better context control"
    enterprise_adoption:
      - "Microsoft Dynamics 365 ERP MCP Server (public preview)"
      - "Worldpay MCP for payments (launched Nov 24, 2025)"
    source: "https://blog.modelcontextprotocol.io/posts/2025-11-25-first-mcp-anniversary/"

  yaml_trends:
    deployment_failures: "40% of K8s failures from YAML config errors"
    adoption: "70%+ orgs using structured data by mid-2025"
    validation_impact: "30% decrease in critical errors with schema validation"
    source: "DevOps Institute 2025 Survey"

  fpa_usage:
    excel_weekly: "96% of FP&A professionals use Excel weekly"
    top_functions:
      - "XNPV/XIRR (irregular cash flows)"
      - "PMT/PV/FV/RATE (loan/mortgage)"
      - "XLOOKUP (modern lookup)"
      - "SUMIFS/COUNTIFS (conditional aggregation)"
      - "CHOOSE (scenario modeling)"
    source: "AFP FP&A Benchmarking Survey 2025"

  forge_differentiators:
    vs_copilot:
      - "Deterministic (same input = same output, always)"
      - "Local execution (no cloud dependency)"
      - "Git-friendly (YAML = version control)"
      - "Open source (MIT license)"
      - "No hallucinations (formulas, not predictions)"
    vs_google_ai:
      - "Works offline"
      - "No per-user licensing"
      - "Self-hosted option"

# ═══════════════════════════════════════════════════════════════════════════════
# BACKLOG & RESEARCH
# ═══════════════════════════════════════════════════════════════════════════════

backlog:
  - "OpenAPI spec + Swagger UI for API server"
  - "Forge vs Copilot benchmark suite (marketing)"
  - "Excel compatibility matrix doc"
  - "JetBrains plugin"
  - "=FORGE() AI-assist function (local, deterministic suggestions)"
  - "Forge Cloud (SaaS) - Web UI, collaboration, SSO"

research:
  - id: "experiential-continuity"
    title: "Experiential Continuity Layer"
    status: research
    priority: exploratory
    doc: "docs/research/EXPERIENTIAL_CONTINUITY.md"
    summary: "Extend RoyalBit Asimov with AI identity/experience persistence"

  - id: "copilot-benchmark"
    title: "Forge vs Copilot Benchmark Suite"
    status: idea
    priority: medium
    summary: |
      Create standard financial models (DCF, LBO, IRR calculations).
      Compare Forge (deterministic) vs Copilot (AI-generated).
      Publish hallucination rate data as marketing differentiator.
