# Forge Roadmap
# For version history, see CHANGELOG.md
# Last updated: 2025-12-04

metadata:
  current_version: "5.0.0"
  last_updated: "2025-12-04"
  philosophy: "Zero tokens. Zero emissions. $40K-$132K/year saved."

# Current Release
current:
  version: "5.0.0"
  status: released
  date: "2025-12-04"
  summary: "BREAKING: MIT → Proprietary (RoyalBit Inc.)"
  highlights:
    - "LICENSE CHANGE: FOSS (MIT) → Proprietary (RoyalBit Inc.)"
    - "Free for personal/academic/non-profit use"
    - "Commercial use requires license"
    - "81 functions, 14 CLI tools"
  stats:
    tests: 918
    warnings: 0
    functions_total: 81
    coverage: "~91%"
    commands_coverage: "95.1%"

# ═══════════════════════════════════════════════════════════════════════════════
# NEXT MILESTONE
# ═══════════════════════════════════════════════════════════════════════════════

next:
  - version: "5.1.0"
    summary: "100% Test Coverage"
    priority: HIGH
    status: in_progress
    progress: "95.1% commands.rs coverage achieved (was 76.34%), 72 tests added"

    rationale: |
      ADR-004 requires 100% test coverage. Current: ~91% (was 89.14%).

      Progress:
      - cli/commands.rs: 76.34% → 95.1% (+72 unit tests)
      - watch() excluded via ADR-006 (infinite loop)
      - Tests: 846 → 918

      Remaining gap (~5%):
      - Edge case branches in audit(), variance(), compare() helpers
      - Some error paths in sensitivity/break_even output formatting

    deliverables:
      - task: "Add unit tests for calculate() handler"
        status: done
      - task: "Add unit tests for validate() handler"
        status: done
      - task: "Add unit tests for export() handler"
        status: done
      - task: "Add unit tests for import() handler"
        status: done
      - task: "Add unit tests for audit() handler"
        status: done
      - task: "Add unit tests for compare() handler"
        status: done
      - task: "Add unit tests for variance() handler"
        status: done
      - task: "Add unit tests for sensitivity() handler"
        status: done
      - task: "Add unit tests for goal_seek() handler"
        status: done
      - task: "Add unit tests for break_even() handler"
        status: done
      - task: "Add unit tests for functions() handler"
        status: done
      - task: "Add unit tests for watch() handler"
        status: done
      - task: "Add unit tests for upgrade() handler"
        status: done
      - task: "Cover remaining ~5% edge cases"
        status: pending

    success_criteria:
      - "100% coverage reported by cargo llvm-cov"
      - "All 918+ tests pass"
      - "Zero warnings"

    technical_approach: |
      Test command handlers as library functions (not via binary):

      ```rust
      // commands_tests.rs
      #[test]
      fn test_calculate_success() {
          let file = create_temp_yaml(VALID_MODEL);
          let result = calculate(file.path(), None, false, false, false);
          assert!(result.is_ok());
      }

      #[test]
      fn test_calculate_invalid_file() {
          let result = calculate(Path::new("/nonexistent.yaml"), None, false, false, false);
          assert!(result.is_err());
      }
      ```

      This tests the same code paths as cli_integration_tests.rs but
      runs during coverage builds (not excluded).

# ═══════════════════════════════════════════════════════════════════════════════
# RELEASED VERSIONS (summary only - see CHANGELOG.md for details)
# ═══════════════════════════════════════════════════════════════════════════════

released:
  - version: "5.0.0"
    date: "2025-12-04"
    summary: "BREAKING: MIT → Proprietary"
  - version: "4.4.2"
    date: "2025-12-04"
    summary: "Multi-Document YAML + Includes Export"
  - version: "4.4.1"
    date: "2025-12-04"
    summary: "Scalar Math Functions Bug Fix"
  - version: "4.4.0"
    date: "2025-12-04"
    summary: "Dynamic Array Functions + Scenario Modeling"
  - version: "4.3.0"
    date: "2025-12-04"
    summary: "File Write-Back + Strict Schema Validation"
  - version: "4.2.1"
    date: "2025-12-02"
    summary: "Bug Fixes - Real-world validation issues"
  - version: "4.2.0"
    date: "2025-12-01"
    summary: "Release Automation - Cross-platform CI/CD"

# ═══════════════════════════════════════════════════════════════════════════════
# MARKET INTELLIGENCE (Updated Dec 2025)
# ═══════════════════════════════════════════════════════════════════════════════

market:
  last_updated: "2025-12-04"

  microsoft_excel:
    copilot_function:
      launched: "Nov 2025"
      description: "=COPILOT() function in cells - AI generates content"
      limits: "100 calls/10min, 300 calls/hour"
      requires: "OneDrive/SharePoint (cloud-only)"
      weakness: "Still hallucinates - probabilistic, not deterministic"

  forge_differentiators:
    vs_copilot:
      - "Deterministic (same input = same output, always)"
      - "Local execution (no cloud dependency)"
      - "Git-friendly (YAML = version control)"
      - "No hallucinations (formulas, not predictions)"
      - "Forge-native FP&A functions (variance, break-even, scenarios)"

# ═══════════════════════════════════════════════════════════════════════════════
# BACKLOG & RESEARCH
# ═══════════════════════════════════════════════════════════════════════════════

backlog:
  - "v5.1.0 remaining: Cover final ~5% edge cases in commands.rs (audit/variance/compare helpers)"
  - "OpenAPI spec + Swagger UI for API server"
  - "Forge vs Copilot benchmark suite (marketing)"
  - "Excel compatibility matrix doc"
  - "Array Calculator: Proper interpreter architecture (AST + function registry) - LOW priority"
  - "Split array_calculator tests by category (10k lines) - LOW priority"

research:
  - id: "experiential-continuity"
    title: "Experiential Continuity Layer"
    status: research
    doc: "docs/research/EXPERIENTIAL_CONTINUITY.md"
