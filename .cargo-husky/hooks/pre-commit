#!/bin/bash
# Forge pre-commit hook - mirrors CI checks
# Auto-installed by cargo-husky on `cargo test`

set -e

echo "ğŸ” Running pre-commit checks..."

echo "ğŸ“ Checking formatting..."
cargo fmt --all -- --check

echo "ğŸ“ Running clippy..."
cargo clippy -- -D warnings

# Forge Protocol checks (if installed)
if command -v forge-protocol &> /dev/null; then
    echo "ğŸ“‹ Validating protocol files..."
    forge-protocol validate . || true  # Don't fail on missing files

    echo "ğŸ“ Linting documentation..."
    forge-protocol lint-docs docs/ || exit 1
fi

echo "âœ… Pre-commit checks passed!"
